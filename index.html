<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Connect Store ‚Äî Black Friday</title>
  <meta name="description" content="Connect Store ‚Äî Black Friday ‚Äî ofertas e promo√ß√µes" />
  <style>
    :root{
      --banner-h:120px;
      --max-w:1200px;
      --accent:#ff3b3b;
      --muted:#222;
      font-family: Inter, system-ui, Arial, sans-serif;
    }
    *{box-sizing:border-box}

    /* Banner INTEGRADO ao fluxo do site (n√£o fixo na tela) */
    .site-banner{
      position: static; /* importante: n√£o fixed nem sticky */
      width: 100%;
      height: var(--banner-h);
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(90deg,#0b0b0b 0%, rgba(10,10,10,0.95) 60%, rgba(255,59,59,0.06) 100%);
      box-shadow: 0 6px 20px rgba(0,0,0,0.12);
      color: #fff;
      z-index: 10;
    }
    .site-banner .inner { max-width:var(--max-w); width:100%; padding:0 18px; display:flex; justify-content:space-between; align-items:center; gap:16px; }
    .site-banner .badge{ background:#000;color:#fff;padding:10px 14px;border-radius:10px;font-weight:900 }
    .site-banner .title{ font-size:18px;font-weight:800;margin:0;color:#fff }
    .site-banner .sub{ font-size:13px;color:rgba(255,255,255,0.9);margin:0 }
    .site-banner .cta{ background:var(--accent); color:#fff; padding:10px 14px; border-radius:10px; font-weight:800; text-decoration:none }

    /* Remove qualquer padding-top adicionado anteriormente */
    body{ padding-top:0 !important; }
    main{ padding-top:18px; } /* ajuste normal do layout */

    /* --- Banner fixo (garantido) --- */
    header{ display:none !important; } /* esconde header antigo se existir */
    .top-banner{
      position: fixed !important;
      top: 0;
      left: 0;
      right: 0;
      height: var(--banner-h);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 2147483647; /* m√°ximo seguro */
      background: linear-gradient(90deg, rgba(0,0,0,0.03), rgba(255,255,255,0.02));
      padding: 8px 18px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.06);
      pointer-events: auto;
      will-change: transform;
    }
    /* empurra o conte√∫do para baixo para n√£o ficar embaixo do banner */
    html, body { height: 100%; }
    body { margin: 0; padding-top: var(--banner-h); }
    main { padding-top: 20px; }
    /* evita problemas quando algum ancestor tiver transform (que quebra fixed) */
    .container, .inner, .page, .wrap { transform: none !important; }

    /* Header simples (topo) */
    /* header{
      width:100%;
      background:transparent;
      position:fixed;
      top:0;
      left:0;
      right:0;
      z-index:30;
      height:var(--banner-h);
      display:flex;
      align-items:center;
      justify-content:center;
      pointer-events:none; /* banner controla intera√ß√£o */
    } */

    /* Banner fixo (est√°tico no topo, como imagem enviada) */
    .top-banner {
      position:fixed;
      top:0;
      left:0;
      right:0;
      height:var(--banner-h);
      display:flex;
      align-items:center;
      justify-content:center;
      z-index:40;
      background: linear-gradient(90deg, rgba(0,0,0,0.02), rgba(255,255,255,0.02));
      padding:10px 18px;
      border-bottom:1px solid rgba(0,0,0,0.06);
    }
    .top-banner .inner{max-width:var(--max-w);width:100%;display:flex;align-items:center;justify-content:space-between;gap:12px;}
    .ribbon{background:#000;color:#fff;padding:10px 14px;border-radius:8px;font-weight:900;letter-spacing:0.6px;box-shadow:0 6px 18px rgba(0,0,0,0.06);min-width:120px;text-align:center}
    .top-left{display:flex;align-items:center;gap:14px}
    .top-left h1{margin:0;font-size:18px;font-weight:800;color:#111}
    .top-left p{margin:0;color:var(--muted);font-size:13px}
    .top-actions{display:flex;gap:12px;align-items:center}
    .top-cta{background:#ff3b3b;color:#fff;padding:10px 14px;border-radius:12px;font-weight:800;text-decoration:none}
    .top-note{color:#ff7a3d;font-weight:800}

    /* compensa√ß√£o do banner: empurra conte√∫do para baixo */
    main{max-width:var(--max-w);width:100%;padding: calc(var(--banner-h) + 28px) 28px 80px; margin:0 auto;}

    /* Se√ß√µes: faixa preta e destaque */
    .category{margin-bottom:36px;border-radius:10px;overflow:hidden;box-shadow:0 8px 30px rgba(0,0,0,0.04);border:1px solid rgba(0,0,0,0.04)}
    .category-head{background:#000;color:#fff;padding:12px 16px;display:flex;align-items:center;justify-content:space-between}
    .category-head h2{margin:0;font-size:16px;color:#fff}
    .category-head .sub{color:rgba(255,255,255,0.75);font-size:13px}

    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(210px,1fr));gap:16px;padding:16px;background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent)}
    .card{background:var(--bg);border-radius:12px;padding:12px;box-shadow:0 8px 18px rgba(16,24,40,0.04);display:flex;flex-direction:column;gap:10px;align-items:stretch;border:1px solid rgba(0,0,0,0.04)}
    .thumb{width:100%;aspect-ratio:1.6/1;background:rgba(0,0,0,0.02);border-radius:8px;display:flex;align-items:center;justify-content:center;overflow:hidden;border:1px solid rgba(0,0,0,0.04)}
    .thumb img{width:auto;height:100%;max-width:100%;object-fit:contain;display:block}
    .product-title{font-size:14px;font-weight:700;margin:0;color:#111;min-height:40px}
    .price-badge{display:inline-block;background:rgba(255,136,59,0.08);border:1px solid rgba(255,136,59,0.12);padding:6px 8px;border-radius:8px;color:var(--accent);font-weight:800;font-size:13px}
    .btn{display:inline-block;padding:9px 12px;border-radius:10px;text-decoration:none;background:var(--accent);color:#fff;text-align:center;font-weight:800;box-shadow:0 8px 18px rgba(255,59,59,0.08)}

    /* popup e oferta */
    .offer-popup{ /* manter como antes */ }

    footer{width:100%;padding:20px 0;background:transparent;border-top:1px solid rgba(0,0,0,0.04);margin-top:40px}
    .note{color:var(--muted);font-size:13px}
    @media (max-width:820px){.top-left h1{font-size:16px}.top-banner .inner{padding:0 8px} .grid{padding:12px}}
    @media (max-width:520px){.grid{grid-template-columns:repeat(auto-fill,minmax(160px,1fr))}}

    /* Fix r√°pido: garante que qualquer banner .top-banner seja escondido e layout normal */
    .top-banner, [role="banner"], .header-banner { display: none !important; visibility: hidden !important; height: 0 !important; overflow: hidden !important; }
    html, body { height: auto !important; }
    body { padding-top: 0 !important; margin-top: 0 !important; }
    main { padding-top: 0 !important; margin-top: 0 !important; }
  </style>
</head>
<body>
  <!-- BANNER INTEGRADO AO SITE (colocado como PRIMEIRO elemento dentro de <main>) -->
  <!-- Localize o in√≠cio de <main> no seu arquivo e cole este bloco imediatamente ap√≥s a tag <main> -->
  <div class="site-banner" role="banner" aria-label="Banner principal de ofertas">
    <div class="inner">
      <div style="display:flex;gap:14px;align-items:center">
        <div class="badge">BLACK FRIDAY</div>
        <div>
          <div class="title">Ofertas imperd√≠veis ‚Äî Descontos exclusivos</div>
          <div class="sub">Estoque limitado ‚Äî aproveite agora</div>
        </div>
      </div>
      <div>
        <a class="cta" href="#tvs">Confira agora</a>
      </div>
    </div>
  </div>

  <main>
    <section id="tvs" class="category">
      <div class="category-head"><h2>TVs</h2><div class="sub">Ofertas e promo√ß√µes</div></div>
      <div class="grid" id="grid-tvs"></div>
    </section>

    <section id="shoes" class="category">
      <div class="category-head"><h2>Cal√ßados</h2><div class="sub">Sele√ß√£o de t√™nis e botas</div></div>
      <div class="grid" id="grid-shoes"></div>
    </section>

    <section id="laptops" class="category">
      <div class="category-head"><h2>Notebooks</h2><div class="sub">Modelos e ofertas</div></div>
      <div class="grid" id="grid-laptops"></div>
    </section>

    <section id="headphones" class="category">
      <div class="category-head"><h2>Fones de ouvido</h2><div class="sub">√Åudio e acess√≥rios</div></div>
      <div class="grid" id="grid-headphones"></div>
    </section>

    <section id="cases" class="category">
      <div class="category-head"><h2>Capinhas de celular</h2><div class="sub">Prote√ß√£o e estilo</div></div>
      <div class="grid" id="grid-cases"></div>
    </section>

    <section id="mobiles" class="category">
      <div class="category-head"><h2>Celulares</h2><div class="sub">Smartphones e iPhones</div></div>
      <div class="grid" id="grid-mobiles"></div>
    </section>

    <section id="others" class="category">
      <div class="category-head"><h2>Outros</h2><div class="sub">Consoles, smartwatches e itens avulsos</div></div>
      <div class="grid" id="grid-others"></div>
    </section>

  </main>
  <script>
(function(){
  const ID = 'site-banner-inject-v3';
  const MODAL_ID = 'site-about-modal-v1';
  if (document.getElementById(ID)) return;

  const css = `
    /* banner */
    #${ID} { position: static !important; width: 100vw !important; margin-left: calc(50% - 50vw) !important;
      box-sizing: border-box !important; height: 120px !important; display: flex !important;
      align-items: center !important; background: linear-gradient(90deg,#0b0b0b 0%, rgba(10,10,10,0.95) 60%, rgba(255,59,59,0.06) 100%) !important;
      color: #fff !important; box-shadow: 0 6px 20px rgba(0,0,0,0.12) !important; z-index: 9999 !important; overflow: hidden !important; }
    #${ID} .inner { max-width: 1200px; width:100%; margin:0 auto; padding: 0 18px; display:flex; align-items:center; justify-content:space-between; gap:16px; }
    #${ID} .left { display:flex; gap:14px; align-items:center; }
    #${ID} .badge{ background:#000; color:#fff; padding:10px 14px; border-radius:10px; font-weight:900; white-space:nowrap; }
    #${ID} .store-name{ font-weight:800; font-size:18px; margin:0; color:#fff; }
    #${ID} .store-sub{ font-size:13px; color: rgba(255,255,255,0.9); margin:0; }
    #${ID} .contact, #${ID} .about-btn { display:flex; align-items:center; gap:8px; background: rgba(0,0,0,0.12); padding:8px 12px; border-radius:10px; color:#fff; text-decoration:none; cursor:pointer; }
    #${ID} .contact svg, #${ID} .about-btn svg{ width:20px;height:20px; display:block; }
    #${ID} .contact .txt, #${ID} .about-btn .txt{ font-weight:700; font-size:14px; color:#fff; }
    #${ID} .cta{ background: #ff3b3b; color:#fff; padding:10px 14px; border-radius:10px; font-weight:800; text-decoration:none; white-space:nowrap; }
    @media (max-width:720px){
      #${ID} { height:100px !important; }
      #${ID} .store-name{ font-size:15px; }
      #${ID} .store-sub{ display:none; }
      #${ID} .cta{ padding:8px 10px; font-size:13px; }
    }

    /* modal */
    #${MODAL_ID} { position: fixed; inset: 0; display: none; align-items:center; justify-content:center; z-index:2147483647; }
    #${MODAL_ID}.open { display:flex; }
    #${MODAL_ID} .overlay { position:absolute; inset:0; background:rgba(0,0,0,0.6); }
    #${MODAL_ID} .dialog { position:relative; background:#fff; color:#111; border-radius:12px; padding:20px; max-width:520px; width:92%; box-shadow:0 20px 50px rgba(0,0,0,0.3); z-index:2; font-family:Inter, system-ui, Arial, sans-serif; }
    #${MODAL_ID} .dialog h2{ margin:0 0 8px; font-size:18px; }
    #${MODAL_ID} .dialog p{ margin:6px 0; line-height:1.4; }
    #${MODAL_ID} .close { position:absolute; top:8px; right:10px; background:transparent; border:none; font-size:22px; cursor:pointer; color:#666; }
  `;
  const style = document.createElement('style');
  style.setAttribute('data-injected','site-banner-v3-style');
  style.appendChild(document.createTextNode(css));
  document.head.appendChild(style);

  const whatsappSVG = `<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
    <path d="M20.52 3.48A11.87 11.87 0 0 0 12 .75C6.48.75 1.92 5.31 1.92 10.83c0 1.93.5 3.78 1.45 5.43L1 23l6.98-2.35a11.9 11.9 0 0 0 4.02.68c6.52 0 11.08-4.56 11.08-10.08 0-2.7-1.05-5.18-2.56-6.9z" fill="#25D366"/>
    <path d="M17.4 14.06c-.29-.15-1.7-.84-1.96-.94-.26-.1-.45-.15-.64.15-.19.29-.73.94-.9 1.13-.17.19-.34.22-.63.07-.29-.15-1.23-.45-2.34-1.44-.87-.77-1.46-1.71-1.63-2-.17-.29-.02-.45.13-.6.13-.13.29-.34.44-.51.15-.17.2-.29.3-.48.1-.19.05-.37-.02-.52-.07-.15-.64-1.54-.88-2.13-.23-.55-.47-.48-.64-.49l-.55-.01c-.19 0-.5.07-.76.37-.26.29-1 .98-1 2.39 0 1.41 1.03 2.77 1.17 2.96.14.19 2.02 3.2 4.9 4.49 2.88 1.29 2.88.86 3.4.81.52-.05 1.7-.69 1.94-1.36.24-.66.24-1.22.17-1.34-.07-.12-.26-.19-.55-.34z" fill="#fff"/>
  </svg>`;

  const infoSVG = `<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
    <circle cx="12" cy="12" r="10" fill="#fff" opacity="0.06"/>
    <path d="M12 11v5" stroke="#fff" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
    <path d="M12 7h.01" stroke="#fff" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
  </svg>`;

  function makeBanner(){
    const el = document.createElement('div');
    el.id = ID;
    el.innerHTML = `
      <div class="inner" role="region" aria-label="Banner de ofertas">
        <div class="left">
          <div class="badge">BLACK FRIDAY</div>
          <div>
            <div class="store-name">Connect Store</div>
            <div class="store-sub">Ofertas imperd√≠veis ‚Äî descontos exclusivos</div>
          </div>
        </div>
        <div style="display:flex;gap:12px;align-items:center">
          <a href="https://wa.me/5514999089185" target="_blank" rel="noopener noreferrer" class="contact" aria-label="Fale conosco via WhatsApp">
            ${whatsappSVG}
            <span class="txt">Fale conosco</span>
          </a>
          <button class="about-btn" aria-haspopup="dialog" aria-controls="${MODAL_ID}" title="Quem somos">
            ${infoSVG}
            <span class="txt">Quem somos</span>
          </button>
          <a href="#tvs" class="cta">Confira agora</a>
        </div>
      </div>
    `;
    return el;
  }

  function makeModal(){
    const m = document.createElement('div');
    m.id = MODAL_ID;
    m.setAttribute('role','dialog');
    m.setAttribute('aria-modal','true');
    m.innerHTML = `
      <div class="overlay" data-close="1"></div>
      <div class="dialog" role="document" aria-labelledby="${MODAL_ID}-title">
        <button class="close" aria-label="Fechar">√ó</button>
        <h2 id="${MODAL_ID}-title">Quem somos</h2>
        <p>Seu destino completo em tecnologia, estilo e conforto!</p>
        <p>üì± Smartphones & Acess√≥rios<br>üëü Cal√ßados Masculinos e Femininos<br>üì∫ Smart TVs das melhores marcas<br>‚ú® Moda & acess√≥rios do dia a dia</p>
        <p>üöö Envio r√°pido | üõ°Ô∏è Compra segura | üí≥ V√°rias formas de pagamento</p>
        <p>Conecte-se ao que h√° de melhor em tecnologia e estilo com a Connect Store. Aproveite nossas ofertas exclusivas de Black Friday!</p>
        <p>Como associado da Amazon, eu ganho com compras qualificadas‚úÖ </p>
      </div>
    `;
    return m;
  }

  function insertBanner(){
    // remove banners conflitantes
    document.querySelectorAll('#site-banner-inject-v2, #site-hero, .top-banner, [role="banner"]').forEach(n=>{
      if (n && n.id !== ID) n.remove();
    });

    if (document.getElementById(ID)) return;
    const banner = makeBanner();
    const main = document.querySelector('main');
    if (main) main.insertBefore(banner, main.firstChild);
    else document.body.insertBefore(banner, document.body.firstChild);

    // inserir modal (uma vez)
    if (!document.getElementById(MODAL_ID)) {
      const modal = makeModal();
      document.body.appendChild(modal);

      // eventos: abrir/fechar
      banner.querySelectorAll('.about-btn').forEach(btn=>{
        btn.addEventListener('click', ()=> {
          const m = document.getElementById(MODAL_ID);
          m.classList.add('open');
          // foco no dialog para acessibilidade
          const dlg = m.querySelector('.dialog');
          dlg.focus();
        });
      });

      modal.querySelector('.close').addEventListener('click', ()=> modal.classList.remove('open'));
      modal.querySelector('.overlay').addEventListener('click', ()=> modal.classList.remove('open'));
      document.addEventListener('keydown', (e)=> { if (e.key === 'Escape') document.getElementById(MODAL_ID)?.classList.remove('open'); });
    }
  }

  if (document.readyState === 'loading') document.addEventListener('DOMContentLoaded', insertBanner);
  else insertBanner();

  // re-insere caso removam
  const obs = new MutationObserver(() => { if (!document.getElementById(ID)) insertBanner(); });
  obs.observe(document.body, { childList: true, subtree: false });
})();
</script>
  <footer>
    <div style="max-width:var(--max-w);margin:0 auto;padding:0 18px;display:flex;justify-content:space-between;align-items:center">
      <div class="note">¬© Connect Store ‚Äî Black Friday</div>
    </div>
  </footer>

  <script>
    async function loadProducts() {
      try {
        const res = await fetch('./products.json', {cache: "no-store"});
        const products = await res.json();

        const placeholder = 'https://via.placeholder.com/600x375/ffffff/111111?text=Sem+imagem';
        const grids = {
          tvs: document.getElementById('grid-tvs'),
          shoes: document.getElementById('grid-shoes'),
          laptops: document.getElementById('grid-laptops'),
          headphones: document.getElementById('grid-headphones'),
          cases: document.getElementById('grid-cases'),
          mobiles: document.getElementById('grid-mobiles'),
          others: document.getElementById('grid-others'),
        };

        function detectCategory(title) {
          if (!title) return 'mobiles';
          const t = title.toLowerCase();
          if (t.includes('tv') || t.includes('smart tv')) return 'tvs';
          if (t.includes('t√™nis') || t.includes('tenis') || t.includes('bota') || t.includes('coturno')) return 'shoes';
          if (t.includes('notebook') || t.includes('laptop') || t.includes('vaio') || t.includes('book')) return 'laptops';
          if (t.includes('fone') || t.includes('headphone') || t.includes('jbl') || t.includes('soundcore') ) return 'headphones';
          if (t.includes('playstation') || t.includes('ps5') || t.includes('ps 5') || t.includes('smartwatch') || t.includes('nintendo') || t.includes('console') || t.includes('controle')) return 'others';
          if (t.includes('capa') || t.includes('capinha') || t.includes('case')) return 'cases';
          if (t.includes('iphone') || t.includes('celular') || t.includes('smartphone') || (t.includes('samsung') && t.includes('galaxy') && !t.includes('book'))) return 'mobiles';
          return 'mobiles';
        }

        function cleanTitle(rawTitle) {
          // remove sufixos a partir de separadores que contenham "amazon.com.br" e limpa "Amazon" isolada
          if (!rawTitle) return '';
          let t = rawTitle.replace(/\s*[\|\:\-‚Äì‚Äî].*amazon\.com\.br.*$/i, '').trim();
          // se ainda contiver "amazon" no final ou em par√™nteses, remove
          t = t.replace(/\s*\(?amazon.*$/i, '').trim();
          return t;
        }

        function mkCard(prod) {
          const img = prod.image && prod.image.trim() ? prod.image.trim() : placeholder;
          const rawTitle = (prod.title || '').trim();
          const title = cleanTitle(rawTitle) || 'Produto';
          const url = prod.finalUrl || prod.originalUrl || '#';
          const a = document.createElement('a');
          a.href = url;
          a.target = '_blank';
          a.rel = 'noopener noreferrer nofollow sponsored';
          a.className = 'card';
          a.innerHTML = `
            <div class="thumb"><img src="${img}" alt="${title.replace(/"/g,'')}" onerror="this.src='${placeholder}'"></div>
            <div>
              <p class="product-title">${title}</p>
              <div style="margin-top:10px;display:flex;justify-content:space-between;align-items:center">
                <div class="price-badge">OFERTA</div>
                <a class="btn" href="${url}" target="_blank" rel="noopener noreferrer nofollow sponsored">Ver item</a>
              </div>
            </div>
          `;
          return a;
        }

        products.forEach(p => {
          // ignore items with explicit title "amazon.com" (removido do JSON recomend√°vel)
          const t = (p.title || '').toLowerCase().trim();
          if (t === 'amazon.com') return;

          const cat = detectCategory(p.title || '');
          const grid = grids[cat] || grids['mobiles'];
          if (grid) grid.appendChild(mkCard(p));
        });

      } catch (err) {
        console.error('Erro carregando products.json', err);
      }
    }
    loadProducts();
  </script>
</body>
</html>